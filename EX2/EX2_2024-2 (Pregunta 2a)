#include <iostream>
#include "Bibliotecas/ArbolBinario.h"
#include "Bibliotecas/funcionesArbolBinario.h"
int *convertirBinario(int num, int &cantDig);

using namespace std;

int main() {
    int n=6;
    int arringreso[n]= {0,1,3,5,9,14};
    ArbolBinario arbol1, arbolVacio;
    construir(arbol1);
    construir(arbolVacio);
    ElementoArbolBinario elemento1;
    elemento1.binario=2;
    plantarArbolBinario(arbol1, arbolVacio, elemento1, arbolVacio);;
    NodoArbolBinario *nodo;
    int cantDigIngreso, ingreso;
    cout<<"Ingrese el numero que desea verificar si existe en el arbol predeterminado: ";
    cin>>ingreso;
    int *numVerificarBinario = convertirBinario(ingreso, cantDigIngreso);
    bool existia;
    for (int i = 0; i <= n; i++) {
        int cantDig = 0;
        int *numBinario;
        int copiaNumBinario;
        if (i==n) {
            numBinario=numVerificarBinario;
            copiaNumBinario = ingreso;
        } else {
            numBinario= convertirBinario(arringreso[i], cantDig);
            copiaNumBinario = arringreso[i];
        }
        nodo = arbol1.raiz;
        existia = false;
        while (cantDig>0) {
            int dig = numBinario[cantDig-1];
            ArbolBinario arbol;
            construir(arbol);
            ElementoArbolBinario elemento2;
            elemento2.binario = dig;
            elemento2.numero=-1;
            if (nodo->izquierda!=nullptr and nodo->izquierda->elemento.numero==arringreso[i]) {
                existia = true;
            }
            if (nodo->derecha!=nullptr and nodo->derecha->elemento.numero==arringreso[i]) {
                existia = true;
            }
            if (dig==1) {
                if (nodo->izquierda==nullptr) {
                    plantarArbolBinario(arbol, arbolVacio, elemento2, arbolVacio);
                    nodo->izquierda=arbol.raiz;
                }
                nodo=nodo->izquierda;
            } else {
                if (nodo->derecha==nullptr) {
                    plantarArbolBinario(arbol, arbolVacio, elemento2, arbolVacio);
                    nodo->derecha=arbol.raiz;
                }
                nodo=nodo->derecha;
            }
            cantDig--;
        }

        nodo->elemento.numero = copiaNumBinario;
    }
    if (existia) {
        cout<<"El numero ya existia en el arbol previo"<<endl;
    } else {
        cout<<"El arbol no existia"<<endl;
    }
    return 0;
}

int *convertirBinario(int num, int &cantDig) {
    int j=0;
    int digito;
    int *bin = new int [10];
    if (num==0) bin[0] = 0;
    while (num>0) {
        digito = num%2;
        bin [j] = digito;
        num = num/2;
        j++;
    }
    cantDig = j;
    return bin;
}
